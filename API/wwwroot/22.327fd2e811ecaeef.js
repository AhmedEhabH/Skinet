"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[22],{2022:(S,m,s)=>{s.r(m),s.d(m,{AccountModule:()=>w});var a=s(6814),l=s(2999),o=s(95),t=s(9468),u=s(6448),c=s(9947);let g=(()=>{class e{constructor(n,r,i){this.accountService=n,this.router=r,this.activatedRoute=i}ngOnInit(){this.createLoginForm(),this.returnUrl=this.activatedRoute.snapshot.queryParams.returnUrl||"/shop"}createLoginForm(){this.loginForm=new o.cw({email:new o.NI("",[o.kI.required,o.kI.pattern("^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$")]),password:new o.NI("",o.kI.required)})}onSubmit(){this.accountService.login(this.loginForm.value).subscribe({next:()=>{console.log("logging success"),this.router.navigateByUrl(this.returnUrl)},error:n=>{console.log(n)}})}static#t=this.\u0275fac=function(r){return new(r||e)(t.Y36(u.B),t.Y36(l.F0),t.Y36(l.gz))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:9,vars:7,consts:[[1,"d-flex","justify-content-center","mt-5"],[1,"col-3"],[3,"formGroup","ngSubmit"],[1,"h3","mb-3","fw-normal"],[3,"formControl","label"],[3,"formControl","label","type"],["type","submit",1,"btn","btn-primary","w-100","py-2",3,"disabled"]],template:function(r,i){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(3,"h1",3),t._uU(4,"Login"),t.qZA(),t._UZ(5,"app-text-input",4)(6,"app-text-input",5),t.TgZ(7,"button",6),t._uU(8,"Sign in"),t.qZA()()()()),2&r&&(t.xp6(2),t.Q6J("formGroup",i.loginForm),t.xp6(3),t.Q6J("formControl",i.loginForm.controls.email)("label","Email Address"),t.xp6(1),t.Q6J("formControl",i.loginForm.controls.password)("label","Password")("type","password"),t.xp6(1),t.Q6J("disabled",i.loginForm.invalid))},dependencies:[o._Y,o.JJ,o.JL,o.oH,o.sg,c.t],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}.form-signin[_ngcontent-%COMP%]{max-width:330px;padding:1rem}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}"]})}return e})();var d=s(4825),f=s(4664),h=s(2096),b=s(7398);function v(e,p){if(1&e&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&e){const n=p.$implicit;t.xp6(1),t.hij(" ",n," ")}}function y(e,p){if(1&e&&(t.TgZ(0,"ul",8),t.YNc(1,v,2,1,"li",9),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.errors)}}const C=[{path:"login",component:g},{path:"register",component:(()=>{class e{constructor(n,r,i){this.fb=n,this.accountService=r,this.router=i}ngOnInit(){this.createRegisterForm()}createRegisterForm(){this.registerForm=this.fb.group({displayName:[null,[o.kI.required]],email:[null,[o.kI.required,o.kI.pattern("^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$")],[this.validateEmailNotTaken()]],password:[null,[o.kI.required]]})}onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>{this.router.navigateByUrl("/shop")},error:n=>{console.error(n),this.errors=n.errors}})}validateEmailNotTaken(){return n=>(0,d.H)(500).pipe((0,f.w)(()=>n.value?this.accountService.checkEmailExists(n.value).pipe((0,b.U)(r=>r?{emailExists:!0}:null)):(0,h.of)(null)))}static#t=this.\u0275fac=function(r){return new(r||e)(t.Y36(o.qu),t.Y36(u.B),t.Y36(l.F0))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-register"]],decls:11,vars:10,consts:[[1,"d-flex","justify-content-center","mt-5"],[1,"col-3"],[3,"formGroup","ngSubmit"],[1,"h3","mb-3","fw-normal"],[3,"formControl","label"],[3,"formControl","label","type"],["class","text-danger list-unstyled",4,"ngIf"],["type","submit",1,"btn","btn-primary","w-100","py-2",3,"disabled"],[1,"text-danger","list-unstyled"],[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(3,"h1",3),t._uU(4,"Register"),t.qZA(),t._UZ(5,"app-text-input",4)(6,"app-text-input",4)(7,"app-text-input",5),t.YNc(8,y,2,1,"ul",6),t.TgZ(9,"button",7),t._uU(10,"Register"),t.qZA()()()()),2&r&&(t.xp6(2),t.Q6J("formGroup",i.registerForm),t.xp6(3),t.Q6J("formControl",i.registerForm.controls.displayName)("label","Display Name"),t.xp6(1),t.Q6J("formControl",i.registerForm.controls.email)("label","Email Address"),t.xp6(1),t.Q6J("formControl",i.registerForm.controls.password)("label","Password")("type","password"),t.xp6(1),t.Q6J("ngIf",i.errors),t.xp6(1),t.Q6J("disabled",i.registerForm.invalid))},dependencies:[a.sg,a.O5,o._Y,o.JJ,o.JL,o.oH,o.sg,c.t]})}return e})()}];let F=(()=>{class e{static#t=this.\u0275fac=function(r){return new(r||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[a.ez,l.Bz.forChild(C),l.Bz]})}return e})();var x=s(6208);let w=(()=>{class e{static#t=this.\u0275fac=function(r){return new(r||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[a.ez,F,x.m]})}return e})()}}]);